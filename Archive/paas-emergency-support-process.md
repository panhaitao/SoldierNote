---
title: PaaS平台应急保障流程
date: 2018/10/8
categories: 运维
---
 
# PaaS平台应急保障流程

## 梳理风险点 
 
* 基础设施(IaaS)： 
 
1. 硬件，由客户方提供，风险点，目前所有资源运行在一个数据中心中　 
2. 操作系统，由客户方提供，默认的提供的系统分区部署方式是将　/ /home /var /opt/  各自划分在独立的分区中，　其中/home (1G)  /var (22G) 两个目录容易被应用程序写满 
3. 网络，客户方不同区域网络的延迟可能导致集群组件互相调用超时异常或者带宽不足带来的页面刷新过慢 
4. 存储， 
 
* 平台层面(PaaS)： 
 
1. 平台管理集群，onebox, global 应用日志默认都写入ES集群，容易导致ES节点磁盘空间耗尽　　 
2. 应用业务集群，k8s api server    master节点计算资源分配过少可能会导致api server异常　 
3. alb 负载均衡, alb应用日志默认写在容器内，存在长期运行导致容器内空间占用过高，导致服务异常　 
 
## 预防措施 
 
* 主机监控 
 
1. 使用PaaS 平台提供监控，对主机节点，cpu负载，内存使用，磁盘IO状态等基础指标进行监控，并配置报警 
2. 使用 ansible 工具对主机节点以及容器实例磁盘使用率进行监控，每日处理异常 
 
* 每日巡检 
1. 使用 ansible 工具对有所有主机状态和服务状态检查确认 
 
* 服务循检 
 
1. 每个服务均配置健康检查，确保服务更新始终处于可用状态 
  
* 应急方案 
 
1. 关键组件应急方案
2. 人员响应
3. SLA规范
4. 安全制度
