<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="实时监控系统grafanacollectdinfluxdb">实时监控系统(Grafana＋collectd＋InfluxDB)</h1>
<p>需要 InfluxDB/collectd/Grafana 这三个工具，三个工具的关系：</p>
<pre><code>采集数据（collectd）-&gt; 存储数据（InfluxDB) -&gt; 显示数据（Grafana）。</code></pre>
<ul>
<li>collectd C 语言写的一个系统性能采集工具；</li>
<li>InfluxDB 是 Go 语言开发的一个开源分布式时序数据库，非常适合存储指标、事件、分析等数据；</li>
<li>Grafana 是 Javascript 开发的前端工具，用于访问 InfluxDB，自定义报表、显示图表等。</li>
</ul>
<h2 id="section"></h2>
<ul>
<li>debian sid</li>
<li>influxdb 1.1.1+dfsg1-4</li>
<li>collectd 5.7.1-1.1</li>
<li>Grafana 4.4.2</li>
</ul>
<h2 id="influxdb-安装">InfluxDB 安装</h2>
<p><code>apt install influxdb -y</code></p>
<ul>
<li>/etc/influxdb/influxdb.conf</li>
</ul>
<pre><code>[admin]
  enabled = true
  bind-address = &quot;:8083&quot;
  https-enabled = false
[http]
  enabled = true
  bind-address = &quot;:8086&quot;
[[collectd]]
  enabled = true 
  bind-address = &quot;:25826&quot;
  database = &quot;collectd&quot;</code></pre>
<ul>
<li>netstat -tupln</li>
<li>base option: http://blog.csdn.net/u010185262/article/details/53158786</li>
</ul>
<p>启动后打开 web 管理界面 * Web 管理界面端口是 8083 * HTTP API 监听端口是 8086</p>
<h2 id="collectd-安装">collectd 安装</h2>
<p><code>apt install collectd -y</code></p>
<ul>
<li><pre><code>LoadPlugin network
&lt;Plugin network&gt;
Server &quot;10.1.11.195&quot; &quot;25826&quot;
&lt;/Plugin&gt;</code></pre></li>
</ul>
<h2 id="grafana-安装">grafana 安装</h2>
<p>https://github.com/grafana/grafana</p>
<pre><code>wget https://s3-us-west-2.amazonaws.com/grafana-releases/release/grafana_4.4.2_amd64.deb 
sudo dpkg -i grafana_4.4.2_amd64.deb </code></pre>
<p><code>http://ip:3000</code> 默认用户密码 admin admin</p>
<ul>
<li>添加数据 http://ip:3000/datasources/new</li>
</ul>
<figure>
<img src="images/granafa_add_data_source.png" alt="add data source" /><figcaption>add data source</figcaption>
</figure>
<ul>
<li>新建dashboard <code>http://10.1.11.195:3000/dashboard/new</code></li>
</ul>
</body>
</html>
