<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="概述">概述</h1>
<ul>
<li>源码: https://github.com/Icinga/dashing-icinga2</li>
</ul>
<h1 id="前提">前提</h1>
<ul>
<li>系统中已经安装好<code>icinga2</code></li>
<li>icinga2 开启 api 特性 <code>icinga2 feature enable api</code></li>
</ul>
<h1 id="安装">安装</h1>
<pre><code>apt-get update
apt-get -y install ruby bundler nodejs
gem install bundler
cd /usr/share
git clone https://github.com/Icinga/dashing-icinga2.git
cd dashing-icinga2
bundle</code></pre>
<h1 id="配置">配置</h1>
<ul>
<li>参考<code>/etc/icinga2/conf.d/api-users.conf</code> 配置，</li>
</ul>
<p>vim /etc/icinga2/conf.d/api-users.conf</p>
<p>object ApiUser &quot;dashing&quot; { password = &quot;icinga2ondashingr0xx&quot; permissions = [ &quot;status/query&quot;, &quot;objects/query/*&quot; ] }</p>
<ul>
<li>修改 <code>/usr/share/dashing-icinga2/config/icinga2.json</code></li>
</ul>
<p>{ &quot;icinga2&quot;: { &quot;api&quot;: { &quot;host&quot;: &quot;localhost&quot;, &quot;port&quot;: 5665, &quot;user&quot;: &quot;dashing&quot;, &quot;password&quot;: &quot;icinga2ondashingr0xx&quot; } } }</p>
<h1 id="section"></h1>
<pre><code>cd /usr/share/dashing-icinga2
./restart-dashing</code></pre>
<p>http://localhost:8005</p>
<p>Systemd服务</p>
<p>您可以从tools / systemd安装提供的Systemd服务文件。 它假定工作目录是 /usr/share/dashing-icinga2 ，并且Dashing gem安装到/usr/local/bin/dashing。根据自己的需要采用这些路径。</p>
<pre><code>cp /usr/share/dashing-icinga2/tools/systemd/dashing-icinga2.service /usr/lib/systemd/system/
systemctl daemon-reload
systemctl start dashing-icinga2.service
systemctl status dashing-icinga2.service</code></pre>
</body>
</html>
