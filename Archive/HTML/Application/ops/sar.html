<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p>sysstat概述 Sysstat 是一个软件包，包含监测系统性能及效率的一组工具，这些工具对于我们收集系统性能数据，比如CPU使用率、硬盘和网络吞吐数据。这些数据的收集和分析，有利于我们判断系统是否正常运行，是提高系统运行效率、安全运行服务器的得力助手。</p>
<p>Sysstat软件包集成的工具 Ø iostat 工具提供CPU使用率及硬盘吞吐效率的数据； Ø mpstat 工具提供单个处理器或多个处理器相关数据； Ø sar 工具负责收集、报告并存储系统活跃的信息； Ø sa1 工具负责收集并存储每天系统动态信息到一个二进制的文件中。它是通过计划任务工具cron来运行，是为sadc所设计的程序前端程序； Ø sa2 工具负责把每天的系统活跃性息写入总结性的报告中。它是为sar所设计的前端 ，要通过cron来调用． Ø sadc 是系统动态数据收集工具，收集的数据被写一个二进制的文件中，它被用作sar工具的后端； Ø sadf 显示被sar通过多种格式收集的数据；</p>
<p>sysstat安装 深度服务器操作系统默认已经集成了sysstat工具集。</p>
<p>sysstat工具用法 配置文件的修改： 1. 需要修改的配置文件/etc/default/sysstat ,在此配置文件中把内容“ENABLED=&quot;false&quot;修改为ENABLED=&quot;true&quot; 2. 如果想得到Sysstat工具集所收集的系统信息自动存为某个文件中，你必须通过cron 为 sa1 和sa2 做计划任务。可以通过修改用户的crontab。在默认的情况下，sysstat历史信息将被存放在/var/log/sysstat目录，该计划任务配置文件为/etc/cron.d/sysstat，用户可根据需要对此配置文件进行修改。</p>
<p>sysstat工具集介绍： 1. sadc工具 sadc 位于/usr/lib/sysstat/目录中，如果你没有设置可执行路径，要用绝对路径来运行比较方便 ，如执行命令 /usr/lib/sysstat/sadc，sadc 是把数据写在一个二进制的文件中，如果想查看数据内容，需要用sadf工具来显示。</p>
<p>sadc 的一般用法； /usr/lib/sysstat/sadc [ -C comment ] [ -D ] [ -F ] [ -L ] [ -V ] [ -S { INT | DISK | SNMP | IPV6 | POWER | XDISK | ALL | XALL } ] [ interval [ count ] ] [ outfile ]</p>
<p>其中interval 表示时间间隔，单位是秒，比如3 ；count 统计数据的次数，也是一个数字；outfile 输出统计到outfile文件。 sadc命令常用参数及其含义如表5.1所示。</p>
<p>表5.1 sadc命令常用参数及其含义 参数 含义 -C 当既没有指定interval也没有指定count参数时，这个选项告诉sadc写一个包含备注字符串的假记录，这个备注信息能随着sar的-C参数被显示 -D 用saYYYYMMDD替代saDD作为标准系统每日活跃数据的文件名 -F 强制把数据写入文件 -S 指定让sadc收集的可选的活动 -V 打印版本信息</p>
<p>sadc命令的其他更多参数及其含义，用户可以直接运行man sadc即可查看。</p>
<ol start="2" type="1">
<li>sar工具 sar 工具比较强大，既能收集系统CPU、硬盘动态数据，也能动态显示，更能查看二进制数据文件；sar 的应用比较多，而且也比较复杂，数据更为精确。</li>
</ol>
<p>sar命令常用参数及其含义如表5.2所示。</p>
<p>表5.2 sar命令常用参数及其含义 参数 含义 -A 显示所有历史数据，通过读取/var/log/sysstat目录下的所有文件，并把它们分门别类的显示出来 -b 通过设备的I/O中断读取设置的吞吐率 -B 报告内存或虚拟内存交换统计(报告页的状态信息) -d 报告物理块设备（存储设备）的写入、读取之类的信息，如果直观一点，可以和p 参数共同使用，-dp</p>
<p>-f 从一个二进制的数据文件中读取内容，比如 sar -f filename -i 指定数据收集的时间，时间单位是秒 -n 分析网络设备状态的统计，后面可以接的参数有 DEV、EDEV、NFS、NFSD、SOCK等，比如-n DEV -o 把统计信息写入一个文件，比如 -o filename -P 报告每个处理器应用统计，用于多处理器机器，并且启用SMP内核才有效 -p 显示友好设备名字，以方便查看，也可以和-d 和-n 参数结合使用，比如 -dp 或-np -r 内存占用统计 -t 这个选项对从文件读取数据有用，如果没有这个参数，会以本地时间为标准读出 -u 报告CPU利用率的参数 -v 报告inode, 文件或其它内核表的资源占用信息 -w 报告任务创建系统交换活动吞吐信息 -W 报告交换状态 -h 显示一个简短的帮助信息</p>
<p>sar命令的其他更多参数及其含义，用户可以直接运行man sar即可查看。</p>
<p>用法：如果想知道网络设备错误报告，也就就是用来查看设备故障的。应该用EDEV；如[root@localhost ~]# sar -n EDEV 2 5</p>
</body>
</html>
