<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p>3.2. DNS服务器 3.2.1. BIND 概述<br />
BIND是一种开源的DNS（Domain Name System）协议的实现，包含对域名的查询和响应所需的所有软件，它是互联网上最广泛使用的一种DNS服务器。DNS服务器的类型有如下三种类型： Primary DNS Server(Master) 一个域的主服务器保存着该域的zone配置文件，该域所有的配置、更改都是在该服务器上进行。 Secondary DNS Server(Slave) 一个域的从服务器一般都是作为冗余负载使用，从该域的主服务器上同步记录，从服务器不会进行任何信息的更改 Caching only Server DNS缓存服务器不存在任何的zone配置文件，仅仅依靠缓存来为客户端提供服务，它通常用于负载均衡及加速访问操作 3.2.2. 实例一：BIND的基本安装和配置 1. 安装 yum install bind -y 2. 配置bind 添加一个正向解析zone文件 /var/named/deepin.com.zone $TTL 604800 @ IN SOA deepin.com. root.deepin.com. ( 3 ； Serial 604800 ； Refresh 86400 ； Retry 2419200 ； Expire 604800 ) ； Negative Cache TTL ； @ IN NS deepin.com. @ IN A 192.168.1.1 www IN A 192.168.1.2 ftp IN A 192.168.1.3 添加一个反向解析库文件 /var/named/1.168.192.zone $TTL 604800 @ IN SOA deepin.com. root.deepin.com. ( 1 ； Serial 604800 ； Refresh 86400 ； Retry 2419200 ； Expire 604800 ) ； Negative Cache TTL ； @ IN NS deepin.com. 1 IN PTR deepin.com. 2 IN PTR www.deepin.com. 3 IN PTR ftp.deepin.com. 配置注意事项： 配置文件中的 &quot;@&quot; 符号前不能有任何空白字符 配置文件中的 &quot;IN&quot; 字符前必须有空格或TAB 将zone数据记录配置添加到 /etc/named.conf zone &quot;deepin.com&quot; IN { type master； file &quot;deepin.com.zone&quot;； }；</p>
<p>zone &quot;1.168.192.in-addr.arpa&quot; IN { type master； file &quot;1.168.192.zone&quot;； }； 检查配置zone文件格式语法正确，确保设置正确的权限，执行命令如下： named-checkzone &quot;www.deepin.com&quot; /var/named/deepin.com.zone named-checkzone &quot;192.168.1.2&quot; /var/named/1.168.192.zone chmod 640 deepin.com.zone 3.168.192.zone chown named：named deepin.com.zone 3.168.192.zone 如果以上步骤没有任何错误提示，最后重启服务service named restart 3. 测试验证 验证域名解析 dig <span class="citation" data-cites="127.0.0.1">@127.0.0.1</span> www.deepin.com ，如果执行成功返回结果，类似如下： ； &lt;&lt;&gt;&gt; DiG 9.8.2rc1-RedHat-9.8.2-0.47.rc1.deepin15 &lt;&lt;&gt;&gt; <span class="citation" data-cites="127.0.0.1">@127.0.0.1</span> www.deepin.com ； (1 server found) ；； global options： +cmd ；； Got answer： ；； -&gt;&gt;HEADER&lt;&lt;- opcode： QUERY， status： NOERROR， id： 48256 ；； flags： qr aa rd ra； QUERY： 1， ANSWER： 1， AUTHORITY： 1， ADDITIONAL： 1</p>
<p>；； QUESTION SECTION： ；www.deepin.com. IN A</p>
<p>；； ANSWER SECTION： www.deepin.com. 604800 IN A 192.168.1.2</p>
<p>；； AUTHORITY SECTION： deepin.com. 604800 IN NS deepin.com.</p>
<p>；； ADDITIONAL SECTION： deepin.com. 604800 IN A 192.168.1.1</p>
<p>；； Query time： 0 msec ；； SERVER： 127.0.0.1#53(127.0.0.1) ；； WHEN： Thu Jun 29 14：50：50 2017 ；； MSG SIZE rcvd： 78 验证域名解析 dig <span class="citation" data-cites="127.0.0.1">@127.0.0.1</span> -x 192.168.1.1 ，如果执行成功返回结果，类似如下： ； &lt;&lt;&gt;&gt; DiG 9.8.2rc1-RedHat-9.8.2-0.47.rc1.deepin15 &lt;&lt;&gt;&gt; <span class="citation" data-cites="127.0.0.1">@127.0.0.1</span> -x 192.168.1.1 ； (1 server found) ；； global options： +cmd ；； Got answer： ；； -&gt;&gt;HEADER&lt;&lt;- opcode： QUERY， status： NOERROR， id： 20838 ；； flags： qr aa rd ra； QUERY： 1， ANSWER： 1， AUTHORITY： 1， ADDITIONAL： 1</p>
<p>；； QUESTION SECTION： ；1.1.168.192.in-addr.arpa. IN PTR</p>
<p>；； ANSWER SECTION： 1.1.168.192.in-addr.arpa. 604800 IN PTR deepin.com.</p>
<p>；； AUTHORITY SECTION： 1.168.192.in-addr.arpa. 604800 IN NS deepin.com.</p>
<p>；； ADDITIONAL SECTION： deepin.com. 604800 IN A 192.168.1.1</p>
<p>；； Query time： 0 msec ；； SERVER： 127.0.0.1#53(127.0.0.1) ；； WHEN： Thu Jun 29 14：51：48 2017 ；； MSG SIZE rcvd： 96 至次，bind的基本配置已经完成，更多配置参考<code>man 5 named.conf</code>。</p>
</body>
</html>
