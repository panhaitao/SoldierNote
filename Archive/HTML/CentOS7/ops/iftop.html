<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p>iftop概述 iftop是Linux下的流量监控工具，可以用来观察实时的网络连接和网络流量情况。</p>
<p>iftop安装 深度服务器操作系统默认已经集成了iftop工具。</p>
<p>iftop用法 iftop语法 iftop -h | [-npblNBP] [-i interface] [-f filter code] [-F net/mask] [-G net6/mask6]</p>
<p>iftop常用的option及其含义如表5.9所示。</p>
<p>表5.9 iftop常用的option及其含义 参数 含义 -h 显示帮助信息 -n 使host信息默认直接都显示IP, -N 对服务名称不解析端口，即只显示ip不显示服务端口 -p 运行混杂模式，使用这个参数后，中间的列表显示的本地主机信息，出现了本机以外的IP信息 -P 使host信息及端口信息默认就都显示 -l 显示并计算链接到本地或从本地链接的数据报的ipv6地址，默认此项关闭 -b 数据传输过程中不显示进度条 -m 设置界面最上边的刻度的最大值，刻度分五个大段显示 -B 以bytes为单位显示流量(默认是bits) -i 设定监听的网卡 -f 该参数是过滤计算包用的 -F 显示特定网段的进出流量，如# iftop -F 10.10.1.0/24或# iftop -F 10.10.1.0/255.255.255.0 -G 针对ipv6网络，显示特定网段的进出流量 -c 指定一个配置文件 -t 以不带ncurses的文本接口模式打印输出到屏幕</p>
<p>iftop命令的其他更多选项参数及其含义，用户可以直接运行man iftop即可查看。</p>
<p>操作命令(注意大小写) 按h切换是否显示帮助; 按n切换显示本机的IP或主机名; 按s切换是否显示本机的host信息; 按d切换是否显示远端目标主机的host信息; 按t切换显示格式为2行/1行/只显示发送流量/只显示接收流量; 按N切换显示端口号或端口服务名称; 按S切换是否显示本机的端口信息; 按D切换是否显示远端目标主机的端口信息; 按p切换是否显示端口信息; 按P切换暂停/继续显示; 按b切换是否显示平均流量图形条; 按B切换计算2秒或10秒或40秒内的平均流量; 按T切换是否显示每个连接的总流量;这是翻译过来的说法，我还没用过这个 按l打开屏幕过滤功能，输入要过滤的字符，比如ip,按回车后，屏幕就只显示这个 IP相关的流量信息; 按L切换显示画面上边的刻度;刻度不同，流量图形条会有变化; 按j或按k可以向上或向下滚动屏幕显示的连接记录; 按1或2或3可以根据右侧显示的三列流量数据进行排序; 按<根据左边的本机名或IP排序;
按>根据远端目标主机的主机名或IP排序; 按o切换是否固定只显示当前的连接; 按f可以编辑过滤代码，网络过滤！ 按q退出监控。</p>
<p>iftop应用举例 1. root登录深度服务器操作系统，在tty1执行命令iftop，打开iftop界面，监控网卡的实时流量，如下图。</p>
<p>中间的&lt;= =&gt;这两个左右箭头，表示的是流量的方向。 TX：发送流量 RX：接收流量 TOTAL：总流量 Cumm：运行iftop到目前时间的总流量 peak：流量峰值 rates：分别表示过去 2s 10s 40s 的平均流量 2. 在远端pc机（10.1.11.186），执行如下命令开始向测试机(ip是10.1.11.146)发送文件。可以看到iftop界面中多了关于“10.1.11.186...”的两行信息，界面的第一行以图形长条的形式显示实时流量，界面的下端部分“RX”显示了接收流量的情况。 scp bigfile test@10.1.11.146:/tmp 3. 在测试机，执行如下命令开始向远程pc机发送文件。可以看到iftop界面中多了关于“10.1.11.186...”的两行信息，界面的第一行以图形长条的形式显示实时流量，界面的下端部分“TX”显示了发送流量的情况。 scp /tmp/bigfile wfsong@10.1.11.186:/tmp</p>
</body>
</html>
