<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p>traceroute指令让你追踪网络数据包的路由途径，预设数据包大小是40Bytes，用户可另行设置。</p>
<p>traceroute命令的一般用法: traceroute [-dFlnrvx][-f<存活数值>][-g<网关>...][-i<网络界面>][-m<存活数值>][-p<通信端口>][-s<来源地址>][-t<服务类型>][-w<超时秒数>][主机名称或IP地址][数据包大小]</p>
<p>traceroute命令常用的参数包括-d、-d、-F、-g、-i、-I、-m、-n、-p、-r、-s、-t、-w它们的具体意义请参见表1.16。</p>
<p>表1.16 traceroute命令参数说明 短参数 长参数 参数说明 -d --debug 使用Socket层级的排错功能 -f --first 设置第一个检测数据包的存活数值TTL的大小 -F --dont-fragment 设置勿离断位 -g --gateway 设置来源路由网关，最多可设置8个 -i --interface 设置来源路由网关，最多可设置8个 -I --icmp 使用ICMP回应取代UDP资料信息 -m --max 设置检测数据包的最大存活数值TTL的大小 -n</p>
<p>直接使用IP地址而非主机名称 -p --port 设置UDP传输协议的通信端口 -r</p>
<p>忽略普通的Routing Table，直接将数据包送到远端主机上 -s --source 设置本地主机送出数据包的IP地址 -t --tos 设置检测数据包的TOS数值 -w --wait 设置等待远端主机回报的时间</p>
<p>例如traceroute 最常用的用法： # traceroute www.baidu.com traceroute to www.baidu.com (220.181.111.188), 30 hops max, 60 byte packets 1 gateway.bj.sndu.cn (10.1.11.1) 0.351 ms 0.332 ms 0.446 ms 2 59.108.113.17 (59.108.113.17) 36.399 ms 36.534 ms 36.522 ms 3 219.232.60.1 (219.232.60.1) 35.544 ms 35.540 ms 35.529 ms 4 59.108.2.1 (59.108.2.1) 35.645 ms 35.637 ms 35.753 ms 5 * * <em> 6 bj141-131-149.bjtelecom.net (219.141.131.149) 35.561 ms 34.413 ms 34.397 ms 7 202.97.57.225 (202.97.57.225) 34.362 ms bj141-130-154.bjtelecom.net (219.141.130.154) 21.895 ms </em> 8 * * *</p>
<p>例如设置跳数最大为10： # traceroute -m 10 www.baidu.com traceroute to www.baidu.com (220.181.111.188), 10 hops max, 60 byte packets 1 gateway.bj.sndu.cn (10.1.11.1) 0.191 ms 0.344 ms 0.332 ms 2 59.108.113.17 (59.108.113.17) 2.798 ms 2.936 ms 3.150 ms</p>
<p>3 219.232.60.1 (219.232.60.1) 0.794 ms 0.782 ms 0.910 ms 4 59.108.2.1 (59.108.2.1) 1.194 ms 1.493 ms 1.476 ms 5 * * <em> 6 bj141-131-149.bjtelecom.net (219.141.131.149) 1.383 ms 1.363 ms </em> 7 202.97.57.225 (202.97.57.225) 1.367 ms * <em> 8 </em> * <em> 9 </em> * * 10 220.181.17.90 (220.181.17.90) 2.148 ms 220.181.182.38 (220.181.182.38) 2.444 ms 220.181.17.146 (220.181.17.146) 2.419 ms</p>
<p>例如探测包使用的基本UDP端口设置6888: # traceroute -p 6888 www.baidu.com traceroute to www.baidu.com (220.181.111.188), 30 hops max, 60 byte packets 1 gateway.bj.sndu.cn (10.1.11.1) 0.315 ms 0.305 ms 0.291 ms 2 59.108.113.17 (59.108.113.17) 3.282 ms 3.565 ms 3.845 ms 3 219.232.60.1 (219.232.60.1) 0.987 ms 0.979 ms 0.962 ms 4 59.108.2.1 (59.108.2.1) 1.229 ms 1.523 ms 1.514 ms 5 * * <em> 6 bj141-131-149.bjtelecom.net (219.141.131.149) 1.440 ms </em> 1.375 ms 7 * 202.97.57.225 (202.97.57.225) 1.297 ms <em> 8 </em> * <em> 9 </em> * <em> 10 220.181.17.146 (220.181.17.146) 2.140 ms 220.181.17.22 (220.181.17.22) 2.133 ms 220.181.17.94 (220.181.17.94) 2.122 ms 11 </em> * <em> 12 </em> * *</p>
<p>traceroute命令的其他参数及其意义，用户可以直接运行man traceroute即可查看。</p>
</body>
</html>
