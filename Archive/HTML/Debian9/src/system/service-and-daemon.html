<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="服务与守护进程">服务与守护进程</h1>
<p>本章介绍服务和运行级别的概念，并介绍如何启动，停止和重新启动服务，并且涵盖了如何调整个服务的缺省运行级别。</p>
<h2 id="了解守护进程和运行级别">了解守护进程和运行级别</h2>
<p>守护进程（daemon）是指以后台方式启动，并且不能受到Shell退出影响而退出的进程。服务是一个概念，提供这些服务的程序是通常是由运行在后台的这些守护进程来执行的，大多数服务的启动脚本通常在<code>/etc/init.d/</code>目录或<code>/etc/xinetd.d/</code>目录下。</p>
<p>运行级别（runlevel）是为了便于系统管理而定义的概念，不同的运行级别下运行的服务数量不同，能提供的功能不同。在深度服务器企业版中存在七个运行级别（索引为0），运行级别描述如下：</p>
<ul>
<li>0用于停止系统。此运行级别是保留的，不能更改。</li>
<li>1用于在单用户模式下运行。此运行级别是保留的，不能更改。</li>
<li>2默认情况下不使用。你可以自由定义它。</li>
<li>3用于使用命令行用户界面在完整的多用户模式下运行。</li>
<li>4默认情况下不使用。你可以自由定义它。</li>
<li>5用于以完整的多用户模式运行图形用户界面。</li>
<li>6用于重新引导系统。此运行级别被保留，不能更改。</li>
</ul>
<h2 id="常用操作命令">常用操作命令</h2>
<p><code>chkconfig</code>可以用来设置服务运行在不同级别，<code>service</code>可以用来管理服务器的启停，<code>runlevel</code>命令可以用来检查系统处于那个运行级别，<code>init 3</code>命令可以用来切换当前系统到运行级别3</p>
<ul>
<li>执行命令<code>chkconfig</code>会列出所有服务默认的服务及其运行级别</li>
</ul>
<pre><code>NetworkManager  0:关闭    1:关闭    2:启用    3:启用    4:启用    5:启用    6:关闭
abrt-ccpp       0:关闭    1:关闭    2:关闭    3:启用    4:关闭    5:启用    6:关闭
abrtd           0:关闭    1:关闭    2:关闭    3:启用    4:关闭    5:启用    6:关闭
acpid           0:关闭    1:关闭    2:启用    3:启用    4:启用    5:启用    6:关闭
atd             0:关闭    1:关闭    2:关闭    3:启用    4:启用    5:启用    6:关闭
auditd          0:关闭    1:关闭    2:启用    3:启用    4:启用    5:启用    6:关闭
autofs          0:关闭    1:关闭    2:关闭    3:启用    4:启用    5:启用    6:关闭
blk-availability    0:关闭    1:启用    2:启用    3:启用    4:启用    5:启用    6:关闭
bluetooth       0:关闭    1:关闭    2:关闭    3:启用    4:启用    5:启用    6:关闭
certmonger      0:关闭    1:关闭    2:关闭    3:启用    4:启用    5:启用    6:关闭
cpuspeed        0:关闭    1:启用    2:启用    3:启用    4:启用    5:启用    6:关闭
crond           0:关闭    1:关闭    2:启用    3:启用    4:启用    5:启用    6:关闭
cups            0:关闭    1:关闭    2:启用    3:启用    4:启用    5:启用    6:关闭
dkms_autoinstaller  0:关闭    1:关闭    2:启用    3:启用    4:启用    5:启用    6:关闭
dnsmasq         0:关闭    1:关闭    2:关闭    3:关闭    4:关闭    5:关闭    6:关闭
firstboot       0:关闭    1:关闭    2:关闭    3:关闭    4:关闭    5:关闭    6:关闭
haldaemon       0:关闭    1:关闭    2:关闭    3:启用    4:启用    5:启用    6:关闭
htcacheclean    0:关闭    1:关闭    2:关闭    3:关闭    4:关闭    5:关闭    6:关闭
httpd           0:关闭    1:关闭    2:关闭    3:关闭    4:关闭    5:关闭    6:关闭
ip6tables       0:关闭    1:关闭    2:启用    3:启用    4:启用    5:启用    6:关闭
iptables        0:关闭    1:关闭    2:启用    3:启用    4:启用    5:启用    6:关闭
irqbalance      0:关闭    1:关闭    2:关闭    3:启用    4:启用    5:启用    6:关闭
kdump           0:关闭    1:关闭    2:关闭    3:关闭    4:关闭    5:关闭    6:关闭
lvm2-monitor    0:关闭    1:启用    2:启用    3:启用    4:启用    5:启用    6:关闭
mdmonitor       0:关闭    1:关闭    2:启用    3:启用    4:启用    5:启用    6:关闭
messagebus      0:关闭    1:关闭    2:启用    3:启用    4:启用    5:启用    6:关闭
netconsole      0:关闭    1:关闭    2:关闭    3:关闭    4:关闭    5:关闭    6:关闭
netfs           0:关闭    1:关闭    2:关闭    3:启用    4:启用    5:启用    6:关闭
network         0:关闭    1:关闭    2:启用    3:启用    4:启用    5:启用    6:关闭
nfs             0:关闭    1:关闭    2:关闭    3:关闭    4:关闭    5:关闭    6:关闭
nfs-rdma        0:关闭    1:关闭    2:关闭    3:关闭    4:关闭    5:关闭    6:关闭
nfslock         0:关闭    1:关闭    2:关闭    3:启用    4:启用    5:启用    6:关闭
ntpd            0:关闭    1:关闭    2:启用    3:启用    4:启用    5:启用    6:关闭
ntpdate         0:关闭    1:关闭    2:启用    3:启用    4:启用    5:启用    6:关闭
oddjobd         0:关闭    1:关闭    2:关闭    3:关闭    4:关闭    5:关闭    6:关闭
portreserve     0:关闭    1:关闭    2:启用    3:启用    4:启用    5:启用    6:关闭
postfix         0:关闭    1:关闭    2:启用    3:启用    4:启用    5:启用    6:关闭
pppoe-server    0:关闭    1:关闭    2:关闭    3:关闭    4:关闭    5:关闭    6:关闭
psacct          0:关闭    1:关闭    2:关闭    3:关闭    4:关闭    5:关闭    6:关闭
quota_nld       0:关闭    1:关闭    2:关闭    3:关闭    4:关闭    5:关闭    6:关闭
rdisc           0:关闭    1:关闭    2:关闭    3:关闭    4:关闭    5:关闭    6:关闭
rdma            0:关闭    1:关闭    2:关闭    3:关闭    4:关闭    5:关闭    6:关闭
restorecond     0:关闭    1:关闭    2:关闭    3:关闭    4:关闭    5:关闭    6:关闭
rngd            0:关闭    1:关闭    2:关闭    3:关闭    4:关闭    5:关闭    6:关闭
rpcbind         0:关闭    1:关闭    2:启用    3:启用    4:启用    5:启用    6:关闭
rpcgssd         0:关闭    1:关闭    2:关闭    3:启用    4:启用    5:启用    6:关闭
rpcsvcgssd      0:关闭    1:关闭    2:关闭    3:关闭    4:关闭    5:关闭    6:关闭
rsyslog         0:关闭    1:关闭    2:启用    3:启用    4:启用    5:启用    6:关闭
saslauthd       0:关闭    1:关闭    2:关闭    3:关闭    4:关闭    5:关闭    6:关闭
smartd          0:关闭    1:关闭    2:关闭    3:关闭    4:关闭    5:关闭    6:关闭
spice-vdagentd  0:关闭    1:关闭    2:关闭    3:关闭    4:关闭    5:启用    6:关闭
sshd            0:关闭    1:关闭    2:启用    3:启用    4:启用    5:启用    6:关闭
sssd            0:关闭    1:关闭    2:关闭    3:关闭    4:关闭    5:关闭    6:关闭
sysstat         0:关闭    1:启用    2:启用    3:启用    4:启用    5:启用    6:关闭
udev-post       0:关闭    1:启用    2:启用    3:启用    4:启用    5:启用    6:关闭
wdaemon         0:关闭    1:关闭    2:关闭    3:关闭    4:关闭    5:关闭    6:关闭
winbind         0:关闭    1:关闭    2:关闭    3:关闭    4:关闭    5:关闭    6:关闭
wpa_supplicant  0:关闭    1:关闭    2:关闭    3:关闭    4:关闭    5:关闭    6:关闭
ypbind          0:关闭    1:关闭    2:关闭    3:关闭    4:关闭    5:关闭    6:关闭</code></pre>
<ul>
<li><code>chkconfig --level 35 httpd on</code> #在3，5运行级别，开启httpd系统服务</li>
<li><code>chkconfig --level 01246 httpd off</code> #在0，1，2，4，6运行级别，开启httpd系统服务</li>
<li><code>service start httpd</code> #启动http服务</li>
<li><code>service stop httpd</code> #停止http服务</li>
<li><code>service restart httpd</code> #重启http服务</li>
</ul>
</body>
</html>
